# Дневник путешествий

Функции:
- Регистрация/вход пользователя (JWT).
- Добавление записи о путешествии с описанием, локацией (адрес + lat/lng), стоимостью, ссылкой на изображение, местами культурного наследия, местами для посещения и оценками (безопасность/удобство/населенность).
- Просмотр своих и чужих путешествий (общая лента).
- Автосоздание БД SQLite и пример записи (user `traveler`/пароль `password`).

## Запуск
```
cd travel-diary
npm install
npm start
```
Откройте в браузере `http://localhost:5000/`.

Переменные окружения:
- `PORT` (по умолчанию 5000)
- `JWT_SECRET` — секрет для токена

## API кратко
- `POST /api/register {username, password}`
- `POST /api/login {username, password}` -> `{token}`
- `POST /api/trips` (JWT) — создать запись: `{ title, description, location, lat, lng, cost, imageUrl, heritage, places, ratingSafety, ratingComfort, ratingDensity }`
- `GET /api/trips` — лента
- `GET /api/trips/:id` — запись
- `GET /api/users/:username/trips` — записи пользователя
- `GET /api/health`

## Анализ выполнения (7+)
1. Архитектура: Express + SQLite, JWT-аутентификация, статичный фронт на fetch.
2. Пользователи: хранение хешей паролей (bcrypt), проверка токена на защищённых эндпоинтах.
3. Модель путешествия: локация (адрес + lat/lng), стоимость, ссылка на изображение, наследие, места для посещения, оценки безопасности/удобства/населенности, время создания.
4. Лента: публичный просмотр всех записей, отображение автора; выборка с join пользователем.
5. UX: форма логина/регистрации, форма добавления поездки, карточки с фото и метаданными, тосты для ошибок/успехов.
6. Данные: автосоздание схемы и посев одной примерной записи, хранение в `data.sqlite` (в `.gitignore`).
7. Безопасность: обязательный токен для создания записи, ограничение срока токена (7 дней).
8. Наблюдаемость: health-эндпоинт, консольные ошибки сервера.

## Рекомендации по улучшению
- Добавить refresh-токены, смену пароля и восстановление.
- Валидацию входных данных (длины полей, диапазоны оценок, формат URL), централизованный обработчик ошибок.
- Пагинация и фильтры по локации/стоимости/автору.
- Хранить изображения в объектном сторе, проверять контент-тайп.
- Добавить карты (Leaflet/Mapbox) и выбор координат кликом.
- Добавить комментарии/лайки и видимость (публично/по ссылке/приватно).
- Тесты (unit/интеграция) и миграции БД.

## GitHub
```
git init
git add .
git commit -m "Travel diary app"
git branch -M main
git remote add origin https://github.com/yanushkayy/travel-diary.git
git push -u origin main
```

